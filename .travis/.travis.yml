language: node_js
node_js:
- stable
branches:
  only:
  - dev
jobs:
  include:
    - stage: test
      script: npm test
    - stage: building
      script:
      before_install: bash ./travis/scripts/install.sh
      env:
        - REMOTE_PATH=project/
        - REMOTE_USER=travisci
        - REMOTE_HOST=165.22.77.10
        - REMOTE_PORT=22
      script: 
        - npm run ts
        - bash ./travis/scripts/deploy.sh   